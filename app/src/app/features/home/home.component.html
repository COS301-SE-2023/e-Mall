<app-navbar></app-navbar>

<ion-content class="global-ion-content">
  <div class="ion-content-wrapper">
    <div class="banner">
      <div class="image-container">
        <img [src]="images" alt="Home banner" />
        <ion-button class="overlay-button" (click)="onAllClick()"
          >Shop For You</ion-button
        >
      </div>
    </div>

    <br /><br />
    <!--Product carousel-->
    <div style="align-items: center">
      <h3 #recommendedHeading>Recommended For You</h3>
    </div>
    <div
      style="
        width: 80%;
        display: flex;
        justify-content: center;
        align-items: center;
      ">
      <div *ngIf="(forYouProducts$ | async) === null">
        <mat-spinner></mat-spinner>
      </div>
      <ngb-carousel *ngIf="forYouProducts$ | async as products" [wrap]="true">
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-3"
              *ngFor="let product of products.slice(0, 4); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-3"
              *ngFor="let product of products.slice(4, 8); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-6"
              *ngFor="let product of products.slice(8, 12); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
      </ngb-carousel>
    </div>

    <br /><br />
    <!--Product carousel-->
    <div style="align-items: center">
      <h3>Trending products</h3>
    </div>
    <div
      style="
        width: 80%;
        display: flex;
        justify-content: center;
        align-items: center;
      ">
      <div *ngIf="(popProducts$ | async) === null">
        <mat-spinner></mat-spinner>
      </div>
      <ngb-carousel *ngIf="popProducts$ | async as products" [wrap]="true">
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-3"
              *ngFor="let product of products.slice(0, 4); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-3"
              *ngFor="let product of products.slice(4, 8); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div
              class="col-md-6"
              *ngFor="let product of products.slice(8, 10); let i = index">
              <app-product-card [product]="product"></app-product-card>
            </div>
          </div>
        </ng-template>
      </ngb-carousel>
    </div>
    <ng-container *ngIf="imageObject !== null && imageObject.length > 0">
      <br /><br />
      <!--Product carousel-->
    </ng-container>
  </div>
  <br /><br />
  <ng-container *ngIf="followedSellers$ | async as sellers">
    <ng-container *ngIf="sellers !== null && sellers.length !== 0">
      <div
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          flex-direction: column;
        ">
        <div style="align-items: center">
          <h3>Followed Sellers</h3>
        </div>
        <div
          style="
            width: 60%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
          ">
          <swiper-container
            [centerInsufficientSlides]="true"
            [slidesPerView]="3"
            [loop]="true"
            [lazy]="true">
            <swiper-slide *ngFor="let seller of sellers">
              <ion-img
                style="width: 100%; max-width: 200px; height: 100px"
                (click)="redirect(seller.id)"
                [src]="seller.logo"
                [alt]="seller.name"></ion-img>
            </swiper-slide>
          </swiper-container>
        </div>
      </div>
      <br /><br />
    </ng-container>
  </ng-container>

  <app-footer></app-footer>
</ion-content>
