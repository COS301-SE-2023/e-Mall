<app-navbar></app-navbar>

<ion-content class="global-ion-content">
  <div class="ion-content-wrapper">
    <div class="banner">
      <div class="image-container">
        <img [src]="images" alt="Home banner" />
        <ion-button class="overlay-button" (click)="onAllClick()">Shop Latest</ion-button>
      </div>
    </div>


    <br /><br />
    <!--Product carousel-->
    <div style="align-items: center">
      <h3>Recommended For You</h3>
    </div>
    <div style="
        width: 80%;
        display: flex;
        justify-content: center;
        align-items: center;
      ">
      <div *ngIf="(forYouProducts$ | async) === null">
        <mat-spinner></mat-spinner>
      </div>
      <ngb-carousel *ngIf="forYouProducts$ | async as products" [wrap]="true">
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-3" *ngFor="let product of products.slice(0, 4); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-3" *ngFor="let product of products.slice(4, 8); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-6" *ngFor="let product of products.slice(8, 12); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
      </ngb-carousel>
    </div>

    <br /><br />
    <!--Product carousel-->
    <div style="align-items: center">
      <h3>Trending products</h3>
    </div>
    <div style="
        width: 80%;
        display: flex;
        justify-content: center;
        align-items: center;
      ">
      <div *ngIf="(popProducts$ | async) === null">
        <mat-spinner></mat-spinner>
      </div>
      <ngb-carousel *ngIf="popProducts$ | async as products" [wrap]="true">
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-3" *ngFor="let product of products.slice(0, 4); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-3" *ngFor="let product of products.slice(4, 8); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
        <ng-template ngbSlide>
          <div class="row">
            <div class="col-md-6" *ngFor="let product of products.slice(8, 10); let i = index">
              <app-product-card (click)="goToProductPage(product.id)" [product]="{
                  discount: product.min_price_discount_rate,
                  imageUrl: getOneImg(product?.min_price_img_array),
                  name: product.name,
                  category: product.category,
                  price: product.min_price
                }"></app-product-card>
            </div>
          </div>
        </ng-template>
      </ngb-carousel>
    </div>
  </div>
  <br /><br />
  <app-footer></app-footer>
</ion-content>