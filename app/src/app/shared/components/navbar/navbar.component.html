<!-- <ion-menu side="end" menuId="settings" contentId="main-content">
  <app-settings-pannel
    menuId="settings"
    style="height: 100%"></app-settings-pannel>
</ion-menu> -->

<ion-header>
  <ion-toolbar color="primary" class="navbar">
    <ion-buttons slot="start">
      <ion-icon name="menu-outline" id="openMenuModal"></ion-icon> <!-- Button to open the side menu -->
    </ion-buttons>
    <div class="flex-container">
      <div class="toolbar-button">
        <a class="navbar-brand">
          <img
            class="navbar-logo"
            src="assets/images/logo-black-no-bg.png"
            alt="e-Mall logo"
            (click)="redirect('home')" />
        </a>
      </div>
      <ion-buttons slot="start">
        <ion-button class="toolbar-button" (click)="toggleCategory($event)">
          <span class="label">Categories</span>
          <ion-icon
            *ngIf="!isCategoryOpened"
            name="chevron-down"
            class="arrow"></ion-icon>
          <ion-icon
            *ngIf="isCategoryOpened"
            name="chevron-up"
            class="arrow"></ion-icon>
        </ion-button>
      </ion-buttons>
      <app-search-bar class="search-bar"></app-search-bar>

      <div class="navbar-spacer"></div>
      <ng-container *ngIf="isAuthenticated | async">
        <ion-button
          (click)="combos($event)"
          class="bookmark-button"
          shape="round"
          fill="clear"
          mode="ios">
          <ion-icon [name]="'bookmark'" style="color: black"></ion-icon>
        </ion-button>
        <ion-button
          (click)="openMenu()"
          class="wishlist-button"
          shape="round"
          fill="clear"
          mode="ios">
          <ion-icon [name]="'notifications'" style="color: black"></ion-icon>
          <ng-container
            *ngIf="notificationUnreadCount$ | async as unread_count">
            <ion-badge *ngIf="unread_count > 0">{{ unread_count }}</ion-badge>
          </ng-container>
        </ion-button>
      </ng-container>
      <ion-icon class="search" id="openModal" name="search-outline"></ion-icon>
      <div class="authButton">
        <button
        mat-button
        class="toolbar-button"
        *ngIf="(isAuthenticated | async) === null"
        (click)="signUp()">
        Sign Up
      </button>
        <div
          *ngIf="(isAuthenticated | async) !== null"
          style="margin-top: 5px"
          (click)="openPopover($event)">
          <ion-icon
            name="person-circle"
            aria-hidden="true"
            class="circular-button"></ion-icon>
        </div>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<!--Search modal-->
<ion-modal class="searchMod" trigger="openModal">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title class="ion-text-center">Search</ion-title>
        <ion-buttons slot="end">
          <ion-button color="danger" (click)="closeModal2()">
            <ion-icon slot="icon-only" name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <app-search-bar class="search-bar2"></app-search-bar>
    </ion-content>
  </ng-template>
</ion-modal>

<!--Menu modal-->
<ion-modal class="menuMod" trigger="openMenuModal">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title class="ion-text-center">Menu</ion-title>
        <ion-buttons slot="end">
          <ion-button color="danger" (click)="closeMenuModal()">
            <ion-icon slot="icon-only" name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-list>
        <ion-item>
          <ion-icon name="book" slot="start"></ion-icon>
          Books
        </ion-item>
        <ion-item>
          <ion-icon name="shirt" slot="start"></ion-icon>
          Clothing
        </ion-item>
        <ion-item>
          <ion-icon name="phone-portrait" slot="start"></ion-icon>
          Electronics
        </ion-item>
        <ion-item>
          <ion-icon name="fast-food" slot="start"></ion-icon>
          Food
        </ion-item>
        <ion-item>
          <ion-icon name="home" slot="start"></ion-icon>
          Home & Kitchen
        </ion-item>
        <ion-item>
          <ion-icon name="body" slot="start"></ion-icon>
          Health & Beauty
        </ion-item>
        <ion-item>
          <ion-icon name="football" slot="start"></ion-icon>
          Sports & Outdoors
        </ion-item>
        <ion-item>
          <ion-icon name="game-controller" slot="start"></ion-icon>
          Toys & Games
        </ion-item>
    
        <ion-item-divider></ion-item-divider>
        
        <ion-item>
          <ion-label>My Collections</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-modal>